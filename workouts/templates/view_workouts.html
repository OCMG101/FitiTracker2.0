{% extends 'base.html' %}
{% load static %}

{% block title %}View Workouts | FitiTracker{% endblock %}

{% block styles %}
<link href="{% static 'css/view.css' %}" rel="stylesheet">
{% endblock %}

{% block content %}
<main class="container mt-5 view-container">
  <div class="header-row">
    <h2 class="page-title">Past Workouts</h2>
    <div class="sort-container">
      <label for="sortWorkouts">Sort by:</label>
      <select id="sortWorkouts">
        <option value="newest">Newest First</option>
        <option value="oldest">Oldest First</option>
      </select>
    </div>
  </div>

  <div class="workout-grid">
    {% for workout_date in workout_dates %}
      {% for workout in workout_date.workouts.all %}
        <div class="workout-card" data-date="{{ workout_date.date|date:'Y-m-d' }}" onclick="toggleDetails('details{{ workout.id }}')">
          <div class="workout-header">
            <div>
              <div class="workout-name">{{ workout.name }}</div>
              <div class="workout-date">{{ workout_date.date|date:"d M Y" }}</div>
            </div>
            <i class="bi bi-chevron-down"></i>
          </div>

          <div class="workout-details mt-3" id="details{{ workout.id }}">
            <table class="table table-bordered table-sm">
              <thead class="table-light">
                <tr>
                  <th>Exercise</th>
                  <th>Sets</th>
                  <th>Reps</th>
                  <th>Weight (kg)</th>
                </tr>
              </thead>
              <tbody>
                {% for exercise in workout.exercises.all %}
                  <tr>
                    <td>{{ exercise.exercise_name }}</td>
                    <td>{{ exercise.sets }}</td>
                    <td>{{ exercise.reps }}</td>
                    <td>{{ exercise.weight }}</td>
                  </tr>
                {% endfor %}
              </tbody>
            </table>
          </div>
        </div>
      {% endfor %}
    {% empty %}
      <p class="text-center text-muted">No workouts logged yet.</p>
    {% endfor %}
  </div>
</main>

<!-- External JS -->
<script src="{% static 'js/view.jsx' %}"></script>
{% endblock %}
